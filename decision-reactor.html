<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decision Reactor</title>
    <style>
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --bg-primary: #0d0d0f;
            --bg-secondary: #16161a;
            --bg-card: #1c1c21;
            --text-primary: #fffffe;
            --text-secondary: #94949e;
            --accent: #7f5af0;
            --accent-dim: #6246c7;
            --border: #2e2e35;
            --success: #2cb67d;
            --warning: #ff8906;
            --danger: #e53170;
        }

        html {
            font-size: 16px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            padding: 1.5rem;
        }

        .container {
            max-width: 640px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 2.5rem;
            padding-top: 2rem;
        }

        h1 {
            font-size: 2.25rem;
            font-weight: 700;
            letter-spacing: -0.025em;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.125rem;
        }

        .input-section {
            margin-bottom: 2rem;
        }

        .input-wrapper {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        input[type="text"] {
            width: 100%;
            padding: 1rem 1.25rem;
            font-size: 1.125rem;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 0.75rem;
            color: var(--text-primary);
            outline: none;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        input[type="text"]::placeholder {
            color: var(--text-secondary);
        }

        input[type="text"]:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(127, 90, 240, 0.15);
        }

        button {
            width: 100%;
            padding: 1rem 1.5rem;
            font-size: 1.125rem;
            font-weight: 600;
            background: var(--accent);
            color: var(--text-primary);
            border: none;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
        }

        button:hover:not(:disabled) {
            background-color: var(--accent-dim);
        }

        button:active:not(:disabled) {
            transform: scale(0.98);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .error-message {
            color: var(--danger);
            font-size: 0.875rem;
            margin-top: 0.5rem;
            display: none;
        }

        .error-message.visible {
            display: block;
        }

        .results {
            display: none;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .results.visible {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .result-card {
            background-color: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 0.75rem;
            padding: 1.25rem 1.5rem;
            margin-bottom: 1rem;
        }

        .result-card:last-child {
            margin-bottom: 0;
        }

        .result-label {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .result-label .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .label-summary .dot { background-color: var(--text-secondary); }
        .label-best .dot { background-color: var(--success); }
        .label-base .dot { background-color: var(--accent); }
        .label-worst .dot { background-color: var(--danger); }
        .label-risk .dot { background-color: var(--warning); }
        .label-upside .dot { background-color: var(--success); }
        .label-recommendation .dot { background-color: var(--text-primary); }

        .label-summary { color: var(--text-secondary); }
        .label-best { color: var(--success); }
        .label-base { color: var(--accent); }
        .label-worst { color: var(--danger); }
        .label-risk { color: var(--warning); }
        .label-upside { color: var(--success); }
        .label-recommendation { color: var(--text-primary); }

        .result-text {
            color: var(--text-primary);
            font-size: 1rem;
        }

        .divider {
            height: 1px;
            background: var(--border);
            margin: 1.5rem 0;
        }

        @media (min-width: 480px) {
            body {
                padding: 2rem;
            }

            header {
                padding-top: 3rem;
                margin-bottom: 3rem;
            }

            h1 {
                font-size: 2.75rem;
            }

            .subtitle {
                font-size: 1.25rem;
            }

            .input-wrapper {
                flex-direction: row;
            }

            input[type="text"] {
                flex: 1;
            }

            button {
                width: auto;
                white-space: nowrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Decision Reactor</h1>
            <p class="subtitle">Stress-test a decision before you commit.</p>
        </header>

        <div class="input-section">
            <div class="input-wrapper">
                <input type="text" id="decisionInput" placeholder="e.g., Should I change careers?" autocomplete="off">
                <button id="analyzeBtn">Run Decision Reactor</button>
            </div>
            <p class="error-message" id="errorMsg">Please enter a decision.</p>
        </div>

        <div class="results" id="results">
            <div class="result-card">
                <div class="result-label label-summary"><span class="dot"></span>Decision Summary</div>
                <p class="result-text" id="summary"></p>
            </div>

            <div class="result-card">
                <div class="result-label label-best"><span class="dot"></span>Best Case Outcome</div>
                <p class="result-text" id="bestCase"></p>
            </div>

            <div class="result-card">
                <div class="result-label label-base"><span class="dot"></span>Base Case Outcome</div>
                <p class="result-text" id="baseCase"></p>
            </div>

            <div class="result-card">
                <div class="result-label label-worst"><span class="dot"></span>Worst Case Outcome</div>
                <p class="result-text" id="worstCase"></p>
            </div>

            <div class="divider"></div>

            <div class="result-card">
                <div class="result-label label-risk"><span class="dot"></span>Hidden Risk</div>
                <p class="result-text" id="hiddenRisk"></p>
            </div>

            <div class="result-card">
                <div class="result-label label-upside"><span class="dot"></span>Unexpected Upside</div>
                <p class="result-text" id="unexpectedUpside"></p>
            </div>

            <div class="divider"></div>

            <div class="result-card">
                <div class="result-label label-recommendation"><span class="dot"></span>One Clear Recommendation</div>
                <p class="result-text" id="recommendation"></p>
            </div>
        </div>
    </div>

    <script>
        (function() {
            const input = document.getElementById('decisionInput');
            const btn = document.getElementById('analyzeBtn');
            const errorMsg = document.getElementById('errorMsg');
            const results = document.getElementById('results');

            const categories = {
                career: ['career', 'job', 'work', 'profession', 'quit', 'resign', 'hire', 'employ', 'promotion', 'business', 'startup', 'company', 'freelance', 'remote'],
                relationship: ['marry', 'marriage', 'divorce', 'dating', 'relationship', 'partner', 'boyfriend', 'girlfriend', 'spouse', 'breakup', 'love'],
                financial: ['buy', 'sell', 'invest', 'money', 'save', 'spend', 'loan', 'debt', 'house', 'car', 'stock', 'crypto', 'retire', 'mortgage'],
                education: ['school', 'college', 'university', 'degree', 'study', 'learn', 'course', 'graduate', 'masters', 'phd', 'certificate'],
                relocation: ['move', 'relocate', 'city', 'country', 'abroad', 'travel', 'immigrate', 'emigrate', 'living'],
                health: ['diet', 'exercise', 'gym', 'surgery', 'treatment', 'therapy', 'habit', 'smoking', 'drinking', 'weight'],
                technology: ['app', 'software', 'website', 'platform', 'tech', 'code', 'programming', 'computer', 'digital'],
                social: ['tell', 'confront', 'apologize', 'forgive', 'trust', 'friend', 'family', 'parent', 'child', 'sibling']
            };

            const templates = {
                career: {
                    best: "The transition aligns with emerging opportunities, leading to increased professional satisfaction and compensation. Skills transfer effectively, and the new path opens doors that were previously inaccessible. Network effects compound positively over time.",
                    base: "The change requires an adjustment period of 6-18 months before reaching previous comfort levels. Some expected benefits materialize while others prove harder to achieve than anticipated. Overall trajectory remains positive but progress is incremental.",
                    worst: "The transition reveals unforeseen barriers or market conditions that make success significantly harder. Recovery options exist but require substantial time and resource investment. Previous position or equivalent becomes difficult to reclaim.",
                    risk: "The opportunity cost of delayed action in your current path may exceed the visible costs of transition.",
                    upside: "The process itself may develop transferable skills and perspectives valuable regardless of outcome."
                },
                relationship: {
                    best: "The decision catalyzes positive change and deeper understanding between all parties involved. Communication improves and establishes healthier patterns. Long-term emotional wellbeing increases substantially for everyone affected.",
                    base: "Initial disruption gives way to a new equilibrium that differs from both the current state and ideal expectations. Some aspects improve while others require ongoing management. Adaptation takes longer than anticipated but stabilizes.",
                    worst: "The decision triggers cascading effects that strain multiple relationships simultaneously. Recovery requires significant emotional labor and time. Some damage proves difficult to fully repair.",
                    risk: "The timing of the decision may matter more than the decision itself.",
                    upside: "Clarity achieved through decisive action often proves more valuable than the comfort of ambiguity."
                },
                financial: {
                    best: "The allocation proves well-timed, capturing value appreciation or cost avoidance that exceeds projections. Financial flexibility increases and creates options for future decisions. Compound effects work favorably over time.",
                    base: "Returns or savings track close to historical averages for similar decisions. Some unexpected costs offset some unexpected gains. Net position improves modestly relative to alternatives.",
                    worst: "Market conditions, timing, or unforeseen expenses erode projected value significantly. Liquidity becomes constrained at an inopportune moment. Recovery to baseline requires extended timeline.",
                    risk: "The psychological cost of the decision may exceed the financial mathematics involved.",
                    upside: "The decision-making process itself may establish frameworks useful for larger future financial choices."
                },
                education: {
                    best: "The credential or knowledge gained opens specific doors that directly advance stated goals. Network connections formed during the process prove independently valuable. Return on investment exceeds both time and financial costs.",
                    base: "The educational path provides expected foundational knowledge with moderate practical application. Some courses exceed expectations while others underdeliver. Overall value becomes clear only in retrospect.",
                    worst: "The investment of time and resources yields credentials that prove less marketable or applicable than projected. Opportunity cost of foregone alternatives becomes salient. Debt or time commitment constrains near-term options.",
                    risk: "The field or industry context may shift during the education timeline in ways that affect relevance.",
                    upside: "The discipline required to complete the path may prove more valuable than the content itself."
                },
                relocation: {
                    best: "The new environment aligns with unstated needs and preferences that become clear only after the move. Professional and social opportunities exceed those available in the previous location. Quality of life metrics improve across multiple dimensions.",
                    base: "Adjustment takes 12-24 months before the new location feels established. Some anticipated benefits materialize while others prove location-independent. Trade-offs become clearer but remain acceptable.",
                    worst: "The move reveals incompatibilities with climate, culture, or cost structure that were underweighted in planning. Return migration or secondary move becomes necessary. Social and professional networks require rebuilding.",
                    risk: "The aspects you are moving away from may follow you; the aspects you are moving toward may prove mobile.",
                    upside: "The disruption itself often catalyzes personal growth independent of destination qualities."
                },
                health: {
                    best: "The change produces noticeable improvements within expected timeframes and establishes sustainable patterns. Secondary benefits emerge in energy, mood, or capability. The adjustment period proves shorter than anticipated.",
                    base: "Initial progress plateaus after early gains, requiring refinement of approach. Some metrics improve while others remain stable. Long-term maintenance proves more challenging than initial change.",
                    worst: "The intervention produces minimal measurable benefit or introduces new complications. Resources invested yield poor returns. Alternative approaches may have been more effective.",
                    risk: "The motivation driving this decision may be addressing symptoms rather than root causes.",
                    upside: "The self-knowledge gained from attempting change often informs more effective future approaches."
                },
                technology: {
                    best: "The implementation solves the core problem effectively and scales appropriately with demand. Maintenance burden remains manageable and the solution adapts to changing requirements. User adoption exceeds projections.",
                    base: "The solution addresses primary use cases while revealing secondary needs not initially scoped. Development takes longer than estimated but delivers functional value. Iteration remains necessary but feasible.",
                    worst: "Technical debt, scope creep, or market timing undermines the project's viability. Resources exhaust before achieving sustainable operation. Pivot or abandonment becomes necessary.",
                    risk: "The problem being solved may evolve faster than the solution being built.",
                    upside: "The capabilities developed during building often prove applicable to adjacent opportunities."
                },
                social: {
                    best: "The conversation produces mutual understanding and strengthens the relationship foundation. Unspoken tensions resolve and communication patterns improve. Trust increases on both sides.",
                    base: "The interaction proceeds awkwardly but accomplishes core communicative goals. Some misunderstanding persists but relationship remains functional. Follow-up conversations become necessary but possible.",
                    worst: "The exchange escalates or produces defensive reactions that damage the relationship. Recovery requires significant time and multiple repair attempts. Some trust erosion proves permanent.",
                    risk: "The message you intend to send may differ significantly from the message received.",
                    upside: "The act of initiating difficult conversations often builds capacity for future necessary ones."
                },
                general: {
                    best: "The decision produces favorable outcomes that validate the reasoning behind it. Secondary benefits emerge that weren't part of the original calculus. The path forward becomes clearer as a result.",
                    base: "Results track somewhere between best hopes and contingency plans. Some aspects exceed expectations while others fall short. Overall, the decision proves defensible but not optimal.",
                    worst: "The decision reveals information that would have changed the original calculus significantly. Recovery options exist but require meaningful investment. Alternative paths prove difficult to access.",
                    risk: "The framing of this decision may be obscuring a more fundamental question worth examining.",
                    upside: "The clarity that comes from committed action often exceeds the value of extended deliberation."
                }
            };

            const recommendations = [
                "Identify the single assumption this decision depends on most heavily and stress-test it independently.",
                "Define the minimum viable version of this decision and consider starting there.",
                "Establish clear criteria now for evaluating success at the 6-month mark.",
                "Map the reversibility of this decision and weight your analysis accordingly.",
                "Separate the decision from its timing—they may warrant independent analysis.",
                "Consider what information would change this decision and whether it's obtainable.",
                "Identify who has made this decision before and examine their outcomes.",
                "Distinguish between the decision's difficulty and its importance—they often diverge.",
                "Define the cost of delay explicitly and include it in your analysis.",
                "Consider the second-order effects this decision enables or prevents."
            ];

            function detectCategory(text) {
                const lower = text.toLowerCase();
                let maxScore = 0;
                let detected = 'general';

                for (const [category, keywords] of Object.entries(categories)) {
                    let score = 0;
                    for (const keyword of keywords) {
                        if (lower.includes(keyword)) {
                            score++;
                        }
                    }
                    if (score > maxScore) {
                        maxScore = score;
                        detected = category;
                    }
                }

                return detected;
            }

            function createSummary(text) {
                let cleaned = text.trim();
                
                cleaned = cleaned.replace(/^(should i|do i|can i|will i|would i|is it|am i|are we|could i|might i)\s+/i, '');
                cleaned = cleaned.replace(/\?+$/, '');
                cleaned = cleaned.charAt(0).toUpperCase() + cleaned.slice(1);
                
                if (cleaned.length < 3) {
                    return "The user is considering a decision that requires structured analysis.";
                }

                const verbPatterns = /^(buy|sell|move|quit|start|stop|change|leave|stay|accept|reject|tell|ask|invest|save|spend|learn|try|make|take|get|go|keep|drop|end|begin)/i;
                
                if (verbPatterns.test(cleaned)) {
                    return `The decision involves whether to ${cleaned.toLowerCase()}.`;
                }
                
                return `The decision under consideration is: ${cleaned}.`;
            }

            function hashString(str) {
                let hash = 0;
                for (let i = 0; i < str.length; i++) {
                    const char = str.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash;
                }
                return Math.abs(hash);
            }

            function analyze(text) {
                const category = detectCategory(text);
                const template = templates[category];
                const hash = hashString(text);
                const recIndex = hash % recommendations.length;

                return {
                    summary: createSummary(text),
                    bestCase: template.best,
                    baseCase: template.base,
                    worstCase: template.worst,
                    hiddenRisk: template.risk,
                    unexpectedUpside: template.upside,
                    recommendation: recommendations[recIndex]
                };
            }

            function displayResults(analysis) {
                document.getElementById('summary').textContent = analysis.summary;
                document.getElementById('bestCase').textContent = analysis.bestCase;
                document.getElementById('baseCase').textContent = analysis.baseCase;
                document.getElementById('worstCase').textContent = analysis.worstCase;
                document.getElementById('hiddenRisk').textContent = analysis.hiddenRisk;
                document.getElementById('unexpectedUpside').textContent = analysis.unexpectedUpside;
                document.getElementById('recommendation').textContent = analysis.recommendation;

                results.classList.add('visible');
                results.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }

            function handleAnalyze() {
                const text = input.value.trim();

                if (!text) {
                    errorMsg.classList.add('visible');
                    input.focus();
                    return;
                }

                errorMsg.classList.remove('visible');
                const analysis = analyze(text);
                displayResults(analysis);
            }

            btn.addEventListener('click', handleAnalyze);
            
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleAnalyze();
                }
            });

            input.addEventListener('input', function() {
                if (input.value.trim()) {
                    errorMsg.classList.remove('visible');
                }
            });
        })();
    </script>
</body>
</html>
